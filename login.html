<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Login</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <h1>Login with Telegram</h1>

  <!-- Telegram Login Button -->
  <div id="telegram-button">
    <script async src="https://telegram.org/js/telegram-widget.js?7"
      data-telegram-login="NoteBounce_bot" 
      data-size="large" 
      data-radius="10" 
      data-request-access="write">
    </script>
  </div>

  <!-- Display User Information -->
  <div id="user-info" style="display:none;">
    <h2>Welcome, <span id="username"></span></h2>
    <p>User ID: <span id="user-id"></span></p>
    <p>First Name: <span id="first-name"></span></p>
    <p>Last Name: <span id="last-name"></span></p>
    <p>Username: <span id="telegram-username"></span></p>
  </div>

  <script type="text/javascript">
    // This function will be triggered when the user successfully logs in with Telegram
    function onTelegramAuth(user) {
      // Show the user's details after login
      document.getElementById('user-info').style.display = 'block';
      document.getElementById('username').textContent = user.first_name + ' ' + user.last_name;
      document.getElementById('user-id').textContent = user.id;
      document.getElementById('first-name').textContent = user.first_name;
      document.getElementById('last-name').textContent = user.last_name;
      document.getElementById('telegram-username').textContent = user.username || 'No username';
      
      // Store the user information in localStorage or send it to your server for saving tasks
      localStorage.setItem('telegram_user', JSON.stringify(user));

      // You can also call your backend API to save the user's information, for example:
      // fetch('/save-user', {
      //   method: 'POST',
      //   body: JSON.stringify(user),
      //   headers: { 'Content-Type': 'application/json' }
      // });
    }
  </script>

</body>
</html>
